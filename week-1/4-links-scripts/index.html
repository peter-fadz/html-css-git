<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>4. Adding Links and Scripts - HTML, CSS and Git Exercises</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/missing-styles.css" />
  </head>
  <body>
    <div class="site-wrapper">
      <div class="site-header">
        <div class="site-header__title">Messages</div>
      </div>
      <div class="messages">
        <div class="message">
          <div class="message__author">Won</div>
          <p class="message__content">Where should we meet later?</p>
          <time class="message__time">7:25pm</time>
        </div>
        <div class="message">
          <div class="message__author">Luke</div>
          <p class="message__content">
            Let's meet at the iCafe in Merchant City. https://goo.gl/maps/aza4h9nUBhn
          </p>
          <time class="message__time">7:35pm</time>
        </div>
        <div class="message">
          <div class="message__author">Won</div>
          <p class="message__content">
            No, I prefer the one on Sauchiehall Street. https://goo.gl/maps/wKDoARcHDp42
          </p>
          <time class="message__time">7:38pm</time>
        </div>
      </div>
    </div>
  </body>
  <script>
    (function() {
      var messages = document.querySelectorAll(".message__content");
      if (!messages.length) {
        alert(
          "You have linked the JavaScript, but not at the correct location in the code. The script tag must be added near the end of the <body> tag."
        );
      }
      messages.forEach(function(message) {
        var urls = message.innerHTML.match(/\bhttps?:\/\/\S+/gi);
        if (urls) {
          urls.forEach(function(url) {
            message.innerHTML = message.innerHTML.replace(
              url,
              '<a href="' + url + '">' + url + "</a>"
            );
          });
        }
      });
    })();
  </script>
</html>
